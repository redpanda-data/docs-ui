{{#if (and (ne page.component.name 'api') (or page.attributes.announcement page.componentVersion.asciidoc.attributes.announcement (get-module-announcement) site.keys.announcement))}}
<div class="announcement-bar" role="banner" id="announcement"
     data-announcement-key="{{#if page.attributes.announcement}}page-{{page.component.name}}-{{page.relativeSrcPath}}{{else if page.componentVersion.asciidoc.attributes.announcement}}component-{{page.component.name}}-{{page.version}}{{else if (get-module-announcement)}}module-{{page.component.name}}-{{page.module}}-{{page.version}}{{else if site.keys.announcement}}site-global{{/if}}">
  <div class="announcement-content">
    {{#if page.attributes.announcement}}
      {{page.attributes.announcement-text}}
      <a href="{{{relativize (resolve-resource page.attributes.announcement-link)}}}">{{page.attributes.announcement-link-text}}</a>
    {{else if page.componentVersion.asciidoc.attributes.announcement}}
      {{page.componentVersion.asciidoc.attributes.announcement-text}}
      <a href="{{{relativize (resolve-resource page.componentVersion.asciidoc.attributes.announcement-link)}}}">{{page.componentVersion.asciidoc.attributes.announcement-link-text}}</a>
    {{else}}
      {{#with (get-module-announcement) as |moduleAnnouncement|}}
        {{#if moduleAnnouncement}}
          {{moduleAnnouncement.text}}
          <a href="{{{relativize (resolve-resource moduleAnnouncement.link)}}}">{{moduleAnnouncement.linkText}}</a>
        {{else if site.keys.announcement}}
          {{site.keys.announcementText}}
          <a href="{{{relativize (resolve-resource site.keys.announcementLink)}}}">{{site.keys.announcementLinkText}}</a>
        {{/if}}
      {{/with}}
    {{/if}}
  </div>
  <button id="close-announcement" type="button" aria-label="close" class="close">
    <svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg>
  </button>
</div>
{{/if}}
